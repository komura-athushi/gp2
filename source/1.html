<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="templates/css/template.css">
  </head>

    <body class="background-color">
      <div id="box">
      </div>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
      </script>
      <script>
        jQuery(function(){
          $('#box').load('header.html') // #headerにheader.htmlを読み込む
        });
      </script>
      <div class="title">
        <h1>第一章 オブジェクトの配置(前編)</h1>
      </div>
      <div class="letter-body">
        <ul>
          <div>
            <h3>この章で学ぶこと</h3>
            <h5>・<span class="strong-letter">教材の概要</span>
                <br>・<span class="strong-letter">レベルについて</span>
                <br>・<span class="strong-letter">オブジェクトの配置</span>
            </h5>
          </div>
          <li><h2 class="margin-letter">1.1 概要</h2></li>
          <div class="letter">
            <div>
              ゲームプログラミング1では、簡単なアクションゲームを制作しました。
              <br>こちらの教材では、もっと複雑なアクションゲームを作っていこうと思います。
              今回制作するゲームの完成品は、こちらになります。
              <div class="video margin-letter">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/AGr3d1-wcCQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
              </div>
              <div class="margin-letter">
                ゲームの大まかな流れとしては、プレイヤーを操作して敵を全て倒したらゲームクリアという感じです。
                <br>また、ステージにはレバーやドアといったギミックが配置されています。
                <br>それでは、Game.slnからVisual Studioプロジェクトを立ち上げて、実行してみてください。
                <br>ゲームパッドの左スティックで移動、右スティックでカメラ回転、A、Y、Yボタンでプレイヤーが何らかの行動をします。
              </div>
              <div>
                <img src="sprite/action1/2.png" class="margin-letter">
                <img src="sprite/action1/1.png" class="margin-letter">
              </div>
              <div class="margin-letter">
                このゲームの制作を通じて、<span class="strong-letter">レベル・AI・ステート・当たり判定・エフェクト・アニメーションイベント</span>などについて学んでいきたいと思います。
              </div>
            </div>            
          </div>
          <li><h2 class="margin-letter">1.2 レベルについて</h2></li>
          <div class="letter">
            <div>
              早速ゲームを制作していきたい所ですが、その前に<span class="strong-letter">レベル</span>という概念について解説します。
              <br><span class="strong-letter">レベル</span>とは、STAGEやWAVE、SECTIONなどの<span class="strong-letter">1つの「面」</span>のことを言います。具体的な例を挙げると、スーパーマリオブラザーズのワールド1-1などです。
              <br>さらに、そのレベル(面)を作り上げる作業(オブジェクトの配置など)のことを、<span class="strong-letter">レベルデザイン</span>と呼びます。
              <br>この章ではレベルデザインの一種である、オブジェクトの配置を行っていきます。
              <br>レベルについて詳しく知りたい方は、下記のサイトを参照してください。
              <br><a href="https://news.denfaminicogamer.jp/kikakuthetower/180801">レベルデザインの「レベル」って何だ？──ボックス、メイズ、パーセクにマウンテン!?　ゲームの「面」の呼びかたいろいろ 　　やる夫と学ぶ　ゲームが変えた日本語</a>
            </div>
          </div>
          <li><h2 class="margin-letter">1.3 EnemyとBossの配置</h2></li>
          <div class="letter">
            <div>
              それでは、オブジェクトの配置を行っていきましょう。
              <br>まず、Assets/level3D/stage.maxを開いてください。
              <div>
                <img src="sprite/action1/4.png">
              </div>
              <div class="margin-letter">
                そうすると、以下のように背景とhuman(プレイヤー)が配置されていると思います。
              </div>
              <div>
                <img class="margin-letter" src="sprite/action1/5.png">
                <img class="margin-letter" src="sprite/action1/6.png">
              </div>
              <div class="margin-letter">
                ゲームを起動した際に、ステージとプレイヤーが配置されていましたが、その配置はこの3dsmaxのデータを元に配置が行われています。
                <br>それでは、実際にコードを見てみましょう。Game.cppを開いてください。
              </div>
              <div class="margin-letter">
                <code>
                  <ol style="list-style:decimal-leading-zero outside;in-left:0;padding-left:36px;margin:0;background-color:#000;color:#FFF;">
                  <li><font style="color:lightgreen;font-style:italic;">//レベルを構築する。</font></li>
                  <li>&nbsp;m_levelRender.Init(<font style="color:lightcoral;">"Assets/level3D/level.tkl"</font>,</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;[&amp;](LevelObjectData&amp; objData)</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;{</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//名前がhumanだったら。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;if(objData.EqualObjectName(L<font style="color:lightcoral;">"human"</font>) == true)</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;{</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//プレイヤーのオブジェクトを作成する。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_player = NewGO&lt;Player&gt;(0,<font style="color:lightcoral;">"player"</font>);</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//座標を設定する。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_player-&gt;SetPosition(objData.position);</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//回転を設定する。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_player-&gt;SetRotation(objData.rotation);</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//trueにすると、レベルの方でモデルが読み込まれます。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true; </li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//名前がbackgroundだったら。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;else if(objData.EqualObjectName(L<font style="color:lightcoral;">"background"</font>) == true)</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;{</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//背景オブジェクトを作成する。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_background = NewGO&lt;BackGround&gt;(0, <font style="color:lightcoral;">"background"</font>);</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//座標を設定する。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_background-&gt;SetPosition(objData.position);</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//大きさを設定する。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_background-&gt;SetScale(objData.scale);</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:lightgreen;font-style:italic;">//回転を設定する。</font></li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_background-&gt;SetRotation(objData.rotation);</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;return true;</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;});</li>
                  </ol></code>
              </div>
              <div class="margin-letter">
                こちらのコードで、先ほどの3dsmaxの配置データを読み込んで、ステージとプレイヤーを配置しています。「level.tkl」というファイルが、3dsmaxの配置データを記録したファイルになります。
                <br>それでは、実際に3dsmaxを使用してオブジェクトを配置してみましょう。
              </div>
              <div class="margin-letter">
                では、3dsmaxに戻って、右側の「ユーティリティ」→「MAXScript」→「スクリプトを起動」から、デスクトップの「tkExporterのショーットカット」を選択してください。
              </div>
              <div>
                <img class="margin-letter" src="sprite/action1/8.png">
                <br>
                <img class="margin-letter" src="sprite/action1/9.png">
                <br>
                <img class="margin-letter" src="sprite/action1/10.png">
                <br>
                <img class="margin-letter" src="sprite/action1/11.png">
              </div>
              <div class="margin-letter">
                そうすると、「ユーティリティ」に下記のような項目が追加されたと思います。
              </div>
              <div>
                <img class="margin-letter" src="sprite/action1/12.png">
              </div>

            </div>
          </div>
        </ul>
      </div>
    </body>

</html>